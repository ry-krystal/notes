<!--
 * @Description: 
-->
#### 生命周期
React 组件的生命周期根据广义定义描述，可以分为挂载、渲染和卸载这几个阶段。当渲染后的组件需要更新时，我们会重新去渲染组件，直至卸载。
因此我们可以把React生命周期分为两类：
  - 当组件在挂载或卸载时
  - 当组件接收新的数据时，即组件更新时

1. __挂载或卸载过程__
  1.1 组件的挂载
  组件的挂载是最基本的过程，这个过程主要做组件状态的初始化。

    ```javascript
    import React, { Component, PropType } from 'react'

    class App extends Component {
      static propTypes = {
        // ...
      }

      static defaultProps = {
        // ... 
      }

      constructor(props) {
        super(props);

        this.state = {
          // ...
        }
      }

      componentWillMount() {
        // ...
      }

      componentDidMount() {
        // ...
      }

      render() {
        return <div>this is a demo</div>
      }
    }
    ```
  - 我们看到propTypes和defaultProps分别代表props类型检查和默认类型。这两个属性被声明成静态属性，意味着从类外面也可以访问它们，比如可以这么访问：App.propTypes和App.defaultProps。

  - 之后会看到两个明显的生命周期方法，其中 __componentWillMount方法会在render方法之前执行，而componentDidMount方法会在render方法之后执行，分别代表渲染前后的时刻。__
  
  - 如果我们在componentWillMount中执行setState方法，会发生什么呢？组件会更新state,但组件只渲染一次。因此，这是无意义的执行，初始化时的state都可以放在this.state。
  
  - 如果我们在componentDidMount中执行setState方法，又会放生什么呢? 组件当然会再次更新，不过在初始化过程就渲染了两次组件，这并不是一件好事。但实际情况是，有一些场景不得不需要setState,比如计算组件的位置或宽高时，就不得不让组件先渲染，更新必要的信息后，再次渲染。
  <br />

    1.2 组件的卸载
  - 组件的卸载非常简单，只有componentWillUnmount这一个卸载前状态：
    ```javascript
      import React, { Component, PropTypes } from 'react'

      class App extends Component {
        componentWillUnmount() {
          // ...
        }

        render() {
          return <div>This is a demo</div>
        }
      }
    ```
2. __数据更新过程__

    ```javascript
      import React, { Component, PropTypes } from 'react'

      class App extends Component {
        componentWillReceiveProps(nextProps) {
          // this.setState({})
        }

        shouldComponentUpdate(nextProps, nextState) {
          // return true
        }

        componentWillUpdate(nextProps, nextState) {
          // ...
        }

        componentDidUpdate(prevProps, prevState) {
          // ...
        }

        render() {
          return <div>this is a demo</div>
        }
      }
    ```
    如果组件自身的state更新了，那么会依次执行shouldComponentUpdate、componentWillUpdate、render和componentDidUpdate。
  
    shouldComponentUpdate是一个特别的方法，它接收需要更新的props和state,让开发者增加必要的条件判断，让其在需要时更新，不需要时不更新。因此，__当方法返回false的时候，组件不再向下执行生命周期方法。__

    这里需要注意的是，__你不能在componentWillUpdate中执行setState。__

    如果组件是由父组件更新props而更新的，那么shouldComponentUpdate之前会先执行componentWillReceiveProps方法。此方法可以作为React在props传入后，渲染之前setState的机会。在此方法中调用setState是不会二次渲染的。
    ```javascript
      componentWillReceiveProps(nextProps) {
        if ('activeIndex' in nextProps) {
          this.setState({
            activeIndex: nextProps.activeIndex
          })
        }
      }

      handleTabClick(activeIndex) {
        const { onChange } = this.props
        const { activeIndex: innerActiveIndex } = this.state;
        const prevIndex = innerActiveIndex;

        if (
          activeIndex !== innerActiveIndex 
          && 
          'defaultActiveIndex' in this.props
        ) {
          this.setState({
            activeIndex,
            prevIndex
          });

          onChange({
            activeIndex,
            prevIndex
          })
        }
      }
    ```
    
